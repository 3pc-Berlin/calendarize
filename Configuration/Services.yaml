services:
  _defaults:
    autowire: true
    autoconfigure: true
    public: false

  HDNET\Calendarize\:
    resource: '../Classes/*'

  HDNET\Calendarize\EventListener\CalendarizeFieldListener:
    tags:
      - name: event.listener
        identifier: 'calendarizeField'
        event: TYPO3\CMS\Core\Database\Event\AlterTableDefinitionStatementsEvent

  HDNET\Calendarize\EventListener\ImportSingleIcalEventListener:
    tags:
      - name: event.listener
        identifier: 'importSingelIcal'
        event: HDNET\Calendarize\Event\ImportSingleIcalEvent

  HDNET\Calendarize\EventListener\BookingCountriesListener:
    tags:
      - name: event.listener
        identifier: 'bookingCountries'
        event: HDNET\Calendarize\Event\GenericActionAssignmentEvent

  HDNET\Calendarize\EventListener\DefaultEventSearchListener:
    tags:
      - name: event.listener
        identifier: 'defaultEventSearch'
        event: HDNET\Calendarize\Event\IndexRepositoryFindBySearchEvent

  HDNET\Calendarize\EventListener\DefaultEventConstraintsListener:
    tags:
      - name: event.listener
        identifier: 'defaultEventConstraints'
        event: HDNET\Calendarize\Event\IndexRepositoryDefaultConstraintEvent

  HDNET\Calendarize\Command\CleanupCommandController:
    tags:
      - name: console.command
        command: 'calendarize:cleanup'
        schedulable: true

  HDNET\Calendarize\Command\ImportCommandController:
    tags:
      - name: console.command
        command: 'calendarize:import'
        schedulable: true

  HDNET\Calendarize\Command\ReindexCommandController:
    tags:
      - name: console.command
        command: 'calendarize:reindex'
        schedulable: true

  dashboard.widgets.calendarizeNextEvents:
    class: 'TYPO3\CMS\Dashboard\Widgets\ListWidget'
    arguments:
      $view: '@dashboard.views.widget'
      $dataProvider: '@HDNET\Calendarize\Widgets\DataProvider\NextEventsDataProvider'
    tags:
      - name: dashboard.widget
        identifier: 'calendarizeNextEvents'
        groupNames: 'calendarizegroup'
        title: 'LLL:EXT:calendarize/Resources/Private/Language/locallang.xlf:calendarizeNextEvents.title'
        description: 'LLL:EXT:calendarize/Resources/Private/Language/locallang.xlf:calendarizeNextEvents.description'
        iconIdentifier: 'calendarize-extension'
        height: 'medium'
        width: 'medium'

  dashboard.widgets.calendarizeIndexAmount:
    class: 'TYPO3\CMS\Dashboard\Widgets\NumberWithIconWidget'
    arguments:
      $view: '@dashboard.views.widget'
      $dataProvider: '@HDNET\Calendarize\Widgets\DataProvider\IndexAmountDataProvider'
      $options:
        title: 'LLL:EXT:calendarize/Resources/Private/Language/locallang.xlf:calendarizeIndexAmount.title'
        icon: 'calendarize-extension'
    tags:
      - name: dashboard.widget
        identifier: 'calendarizeIndexAmount'
        groupNames: 'calendarizegroup'
        title: 'LLL:EXT:calendarize/Resources/Private/Language/locallang.xlf:calendarizeIndexAmount.title'
        description: 'LLL:EXT:calendarize/Resources/Private/Language/locallang.xlf:calendarizeIndexAmount.description'
        iconIdentifier: 'calendarize-extension'
        height: 'small'
        width: 'small'
